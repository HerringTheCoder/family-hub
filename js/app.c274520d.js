(function(e){function t(t){for(var i,l,n=t[0],o=t[1],d=t[2],u=0,m=[];u<n.length;u++)l=n[u],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&m.push(s[l][0]),s[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);c&&c(t);while(m.length)m.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,n=1;n<a.length;n++){var o=a[n];0!==s[o]&&(i=!1)}i&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},s={app:0},r=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/family-hub/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var c=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"18b4":function(e,t,a){},"18fc":function(e,t,a){},"244e":function(e,t,a){"use strict";var i=a("bc50"),s=a.n(i);s.a},2465:function(e,t,a){"use strict";var i=a("64fb"),s=a.n(i);s.a},3124:function(e,t,a){},"32db":function(e,t,a){e.exports=a.p+"img/logofinal.dc4de94a.png"},3859:function(e,t,a){},"43c1":function(e,t,a){},"4cdd":function(e,t,a){"use strict";var i=a("e361"),s=a.n(i);s.a},"4e69":function(e,t,a){},5171:function(e,t,a){"use strict";var i=a("18fc"),s=a.n(i);s.a},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("nav-bar"),a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("div",{staticClass:"row"},[this.isLogged?a("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 col-lg-2 px-0 py-0"},[a("sidemenu")],1):e._e(),a("div",{staticClass:"col-xs-12 px-0 py-0",class:e.appStyle},[a("router-view")],1)])]),a("b-footer")],1)},r=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{staticStyle:{"background-image":"linear-gradient(to right,rgb(225,225,225),rgb(255,255,255))"},attrs:{fixed:"","scroll-off-screen":""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("router-link",{attrs:{to:"/",tag:"a"}},[a("span",[e._v("Family HUB")]),a("span",{staticClass:"font-weight-light"},[e._v("grupa C")])])],1),a("v-spacer"),e.isLogged?e._e():a("v-col",{attrs:{sm:"2","justify-self":"center","align-self":"center"}},[a("v-dialog",{attrs:{"max-width":"450px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({},i),[a("span",[e._v("SIGN IN")])])]}}],null,!1,2088182930),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-container",{staticClass:"d-flex align-center justify-center",staticStyle:{background:"rgba(255,255,255,0.75)"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.alert?a("v-alert",{attrs:{type:e.alert.type}},[e._v(e._s(e.alert.content))]):e._e(),a("div",{staticClass:"title"},[a("div",{staticClass:"headline mb-2 text-center",staticStyle:{color:"black"}},[e._v("LOGIN")])]),a("v-text-field",{staticStyle:{margin:"10px"},attrs:{"background-color":"white",solo:"",label:"email","prepend-inner-icon":"fas fa-user-circle",rules:[e.rules.required,e.rules.email]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{staticStyle:{margin:"10px"},attrs:{"background-color":"white",solo:"",label:"password",type:"password","prepend-inner-icon":"fas fa-key",rules:[e.rules.required]},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("div",{staticClass:"my-2"},[a("v-btn",{attrs:{text:"",small:"",color:"primary"},on:{click:e.resetPassword}},[e._v("I have forgot my password")])],1),a("v-btn",{staticStyle:{margin:"10px"},on:{click:e.login}},[a("span",[e._v("SIGN IN")])])],1)],1)],1)],1),e.isLogged?a("v-col",{attrs:{sm:"2","justify-self":"center","align-self":"center"}},[a("v-btn",{attrs:{depressed:"",text:"",icon:""}},[a("v-badge",{attrs:{content:e.messages,value:e.messages,color:"green",overlap:""}},[a("v-icon",[e._v("fas fa-bell")])],1)],1)],1):e._e()],1)},n=[],o=a("bc3a"),d=a.n(o),c=a("2f62"),u=a("00e7"),m=a.n(u);const h="token";let f={expires:"8h"};var v={setTokenCookie(e){m.a.set(h,e,f)},getTokenCookie(){return m.a.get(h)},deleteTokenCookie(){var e=new Date;m.a.set(h,"",{expires:e.getDate()-10}),m.a.delete(h)},hasTokenCookie(){return!!m.a.get(h)}};i["a"].use(c["a"]);var p=new c["a"].Store({state:{user:null,member:null},getters:{user:e=>e.user,member:e=>e.member},mutations:{storeUser(e,t){e.user=t},storeMember(e,t){e.member=t},deleteUser(e){e.user=null},deleteMember(e){e.member=null}},actions:{setSession({commit:e},t){e("storeUser",t)},deleteSession({commit:e}){v.deleteTokenCookie(),e("deleteUser"),e("deleteMember")},setMember({commit:e},t){e("storeMember",t)}}}),b={name:"navbar",data(){return{messages:0,show:!1,email:null,password:null,alert:null,valid:null,dialog:!1,rules:{required:e=>!!e||"Required.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."}}}},components:{},computed:{...Object(c["b"])({isLogged:"user"})},async mounted(){if(!0===this.$route.meta.requiresAuth){let e=await d.a.get("auth/pivot/get");e&&(this.messages=e.data.count)}setInterval(async()=>{if(!0===this.$route.meta.requiresAuth){let e=await d.a.get("auth/pivot/get");e&&(this.messages=e.data.count)}},5e3)},methods:{async login(){if(this.$refs.form.validate()){let e=await d.a.post("auth/login",{email:this.email,password:this.password}).catch(e=>{this.alert={state:!0,type:"error",content:"Passwords must be the same!"}});try{if(e)if(e.data.access_token){this.alert=null,v.setTokenCookie(e.data.access_token);let t=await d.a.get("auth/user");p.dispatch("setSession",t.data);let a=await d.a.get("/auth/member/info");200===a.status&&p.dispatch("setMember",a.data.data[0]),null!==a.data.data[0].first_name&&null!==a.data.data[0].last_name?"admin"===t.data.type?this.$router.push("admin/logs"):this.$router.push("news"):this.$router.push({path:"profile",params:{fromRegister:!0}})}else this.alert={state:!0,type:"error",content:"Passwords must be the same!"};else this.alert={state:!0,type:"error",content:"Something goes wrong! Try again"}}catch{return void(this.alert={state:!0,type:"error",content:"Something goes wrong! Try again"})}}},async logout(){let e=await d.a.get("auth/logout");e||(this.alert={state:!0,type:"error",content:"Something goes wrong! Try again"})},async resetPassword(){let e=await d.a.post("password/create",{email:this.email}).catch(e=>{this.$toasted.error("Something goes wrong, try again later",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:4e3})});e&&this.$toasted.success(e.data.message,{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:4e3}),console.log(e)}}},g=b,_=(a("821b"),a("2877")),x=a("6544"),y=a.n(x),w=a("0798"),k=a("40dc"),V=a("4ca6"),C=a("8336"),I=a("62ad"),P=a("a523"),T=a("169a"),S=a("4bd4"),M=a("132d"),O=a("2fa4"),$=a("8654"),j=a("2a7f"),F=Object(_["a"])(g,l,n,!1,null,"a1ff13fa",null),D=F.exports;y()(F,{VAlert:w["a"],VAppBar:k["a"],VBadge:V["a"],VBtn:C["a"],VCol:I["a"],VContainer:P["a"],VDialog:T["a"],VForm:S["a"],VIcon:M["a"],VSpacer:O["a"],VTextField:$["a"],VToolbarTitle:j["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{staticClass:"foot",attrs:{padless:"",fixed:""}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e._v("\n\t\t"+e._s((new Date).getFullYear())+" —\n\t\t"),a("strong",[e._v("Projektowanie i programowanie systemów internetowych II")])])],1)},A=[],q={name:"b-footer"},R=q,L=(a("2465"),a("553a")),N=Object(_["a"])(R,E,A,!1,null,"79d56d7f",null),B=N.exports;y()(N,{VCol:I["a"],VFooter:L["a"]});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{staticClass:"sidemenu"},[e.isAdmin?a("div",[a("v-row",{staticClass:"title text-center"},[e._v("ADMINISTRATION PANEL")]),a("v-row",[a("v-btn",{attrs:{to:"/admin/users",rounded:""}},[e._v("USERS")])],1),a("v-row",[a("v-btn",{attrs:{to:"/admin/families",rounded:""}},[e._v("FAMILIES")])],1),a("v-row",[a("v-btn",{attrs:{to:"/admin/news",rounded:""}},[e._v("NEWS")])],1),a("v-row",[a("v-btn",{attrs:{to:"/admin/systemlogs",rounded:""}},[e._v("SYSTEM LOGS")])],1)],1):e._e(),!e.isAdmin&&e.isLogged?a("div",[a("v-row",{staticClass:"title text-center"},[e._v("USER PANEL")]),a("v-row",[a("v-btn",{attrs:{to:"/profile",rounded:""}},[e._v("PROFILE")])],1),a("v-row",[a("v-btn",{attrs:{to:"/tree",rounded:""}},[e._v("TREE")])],1),a("v-row",[a("v-btn",{attrs:{to:"/gallery",rounded:""}},[e._v("GALLERY")])],1),a("v-row",[a("v-btn",{attrs:{to:"/news",rounded:""}},[e._v("NEWS")])],1)],1):e._e(),a("v-row",[a("v-btn",{attrs:{rounded:"","min-width":"100px !important","max-width":"200px !important",color:"red"},on:{click:e.signout}},[e._v("SIGN OUT")])],1)],1)},z=[],W={components:{},computed:{...Object(c["b"])({entity:"user"}),isAdmin(){return"admin"===this.entity.type},isLogged(){return!!this.entity}},methods:{async signout(){let e=await d.a.get("auth/logout");e&&(p.dispatch("deleteSession"),this.$router.push("/"))}}},G=W,Y=(a("4cdd"),a("0fd9")),H=Object(_["a"])(G,U,z,!1,null,"46ceb0f0",null),Z=H.exports;y()(H,{VBtn:C["a"],VCol:I["a"],VRow:Y["a"]});var J={name:"App",data(){return{hasSidebar:!0}},components:{NavBar:D,BFooter:B,sidemenu:Z},computed:{appStyle(){return this.isLogged?"col-sm-8 col-md-8 col-lg-10":"col-sm-12"},...Object(c["b"])({isLogged:"user"})}},X=J,K=a("7496"),Q=Object(_["a"])(X,s,r,!1,null,null,null),ee=Q.exports;y()(Q,{VApp:K["a"],VContainer:P["a"]});var te=a("8c4f"),ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{staticClass:"d-flex align-center justify-center px-0 bg",attrs:{md:"6"}},[i("div",{staticClass:"background-img"},[i("v-img",{staticClass:"img",attrs:{src:a("32db"),"max-width":"200px","max-height":"400px"}})],1)]),i("registration")],1)],1)},ie=[],se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{staticClass:"d-flex align-content-center justify-center",attrs:{sm:"12",md:"6"}},[a("v-card",{attrs:{color:"transparent",flat:"","max-width":"400px"}},[a("div",{staticClass:"title"},[a("div",{staticClass:"headline mb-2 text-center"},[e._v("REGISTER YOUR FAMILLY")]),e.alert?a("v-alert",{attrs:{type:e.alert.type}},[e._v(e._s(e.alert.content))]):e._e()],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[a("v-text-field",{attrs:{"background-color":"rgba(255, 255, 255, 0.9)",color:"grey",outlined:"",label:"Familly name"},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{"background-color":"rgba(255, 255, 255, 0.9)",color:"grey",outlined:"",label:"e-mail",rules:[e.rules.required,e.rules.email]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"background-color":"rgba(255, 255, 255, 0.9)",color:"grey",outlined:"","append-icon":e.showPassword?"fas fa-eye":"fas fa-eye-slash",rules:[e.rules.required,e.rules.min],type:e.showPassword?"text":"password",label:"password","prepend-inner-icon":"fas fa-key"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{"background-color":"rgba(255, 255, 255, 0.9)",color:"grey",outlined:"",rules:[e.rules.required,e.rules.min],type:e.showPassword?"text":"password",label:"repeat password","prepend-inner-icon":"fas fa-key"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword=t},expression:"repeatPassword"}}),a("div",{staticClass:"btn text-center"},[a("v-btn",{attrs:{rounded:"",width:"200px"},on:{click:e.signUp}},[e._v("SIGN UP")])],1)],1)],1)],1)],1)},re=[],le={name:"registration",data(){return{showPassword:!1,password:"",repeatPassword:"",surname:"",email:"",valid:null,alert:null,rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters",emailMatch:()=>"The email and password you entered don't match",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."}}}},components:{},methods:{async signUp(){if(this.alert=null,this.$refs.form.validate())try{let e=await d.a.post("auth/signup",{email:this.email,password:this.password,password_confirmation:this.repeatPassword,name:this.surname});e?e.data?this.alert={state:!0,type:"success",content:e.data.message}:this.alert={state:!0,type:"error",content:"Passwords must be the same!"}:this.alert={state:!0,type:"error",content:"Something goes wrong! Try again"}}catch{return void(this.alert={state:!0,type:"error",content:"Something goes wrong! Try again"})}},save(e){this.$refs.menu.save(e)}}},ne=le,oe=a("b0af"),de=a("99d9"),ce=Object(_["a"])(ne,se,re,!1,null,"b225d446",null),ue=ce.exports;y()(ce,{VAlert:w["a"],VBtn:C["a"],VCard:oe["a"],VCardText:de["b"],VCol:I["a"],VForm:S["a"],VTextField:$["a"]});var me={components:{registration:ue}},he=me,fe=(a("cccb"),a("adda")),ve=Object(_["a"])(he,ae,ie,!1,null,null,null),pe=ve.exports;y()(ve,{VCol:I["a"],VContainer:P["a"],VImg:fe["a"],VRow:Y["a"]});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"d-flex align-center justify-center px-0",attrs:{md:"12"}},[a("div",{staticClass:"card"},[e.isValid?a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("h1",[e._v("Create your new password")]),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min],label:"Password",type:"password","prepend-inner-icon":"fas fa-key",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min],type:"password",label:"Repeat password","prepend-inner-icon":"fas fa-key",required:""},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword=t},expression:"repeatPassword"}}),a("v-btn",{staticClass:"mr-4",on:{click:e.submit}},[e._v("submit")])],1):a("h1",[e._v(e._s(e.message))])],1)])],1)],1)},ge=[],_e={data(){return{isValid:!0,message:null,password:"",valid:null,member:{message:""},repeatPassword:"",rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters"}}},async created(){let e=await d.a.get("auth/signup/activate/member/"+this.$route.params.token).catch(e=>{this.message=e.data.message,this.isValid=!1});e&&(this.member=e.data)},methods:{async submit(){let e=await d.a.post("password/reset",{email:this.member.email,password:this.password,password_confirmation:this.repeatPassword,token:this.member.token});e&&(this.$toasted.success("Password correctly changed, now you can login",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3}),this.$router.push("/"))}}},xe=_e,ye=(a("621e"),Object(_["a"])(xe,be,ge,!1,null,null,null)),we=ye.exports;y()(ye,{VBtn:C["a"],VCol:I["a"],VContainer:P["a"],VForm:S["a"],VRow:Y["a"],VTextField:$["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"d-flex align-center justify-center px-0",attrs:{md:"12"}},[a("div",{staticClass:"card"},[e.isValid?a("h1",[e._v(e._s(e.member.message))]):e._e(),e.isValid?a("router-link",{attrs:{to:"/"}}):a("h1",[e._v(e._s(e.message))])],1)])],1)],1)},Ve=[],Ce={data(){return{isValid:!0,message:null,valid:null,member:{message:""}}},async created(){let e=await d.a.get("auth/signup/activate/"+this.$route.params.token).catch(e=>{this.message=e.data.message,this.isValid=!1});e&&(this.member=e.data,this.$toasted.success("Now you can login into your tree",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:4e3}))}},Ie=Ce,Pe=(a("244e"),Object(_["a"])(Ie,ke,Ve,!1,null,null,null)),Te=Pe.exports;y()(Pe,{VCol:I["a"],VContainer:P["a"],VRow:Y["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"d-flex align-center justify-center px-0",attrs:{md:"12"}},[a("div",{staticClass:"card"},[e.isValid?a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("h5",[e._v(e._s(e.member.message))]),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min],label:"Password",type:"password","prepend-inner-icon":"fas fa-key",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min],type:"password",label:"Repeat password","prepend-inner-icon":"fas fa-key",required:""},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword=t},expression:"repeatPassword"}}),a("v-btn",{staticClass:"mr-4",on:{click:e.submit}},[e._v("submit")])],1):a("h1",[e._v(e._s(e.message))])],1)])],1)],1)},Me=[],Oe={data(){return{isValid:!0,message:null,password:"",valid:null,member:{message:""},repeatPassword:"",rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters"}}},async created(){let e=await d.a.get("password/find/"+this.$route.params.token).catch(e=>{this.message=e.data.message,this.isValid=!1});e&&(this.member=e.data),console.log(e)},methods:{async submit(){let e=await d.a.post("password/reset",{email:this.member.email,password:this.password,password_confirmation:this.repeatPassword,token:this.member.token});e&&(this.$toasted.success("Password correctly changed, now you can login",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3}),this.$router.push("/"))}}},$e=Oe,je=(a("5171"),Object(_["a"])($e,Se,Me,!1,null,null,null)),Fe=je.exports;y()(je,{VBtn:C["a"],VCol:I["a"],VContainer:P["a"],VForm:S["a"],VRow:Y["a"],VTextField:$["a"]});var De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Users")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"fas fa-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.active",fn:function(t){var i=t.item;return[a("v-icon",[e._v(e._s(i.active?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"))])]}},{key:"item.action",fn:function(t){var i=t.item;return[a("v-btn",{staticClass:"mx-2",attrs:{small:"",depressed:"",fab:"",dark:"",color:"green"},on:{click:function(t){return e.editItem(i)}}},[a("v-icon",{attrs:{dark:"",small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{staticClass:"mx-2",attrs:{small:"",depressed:"",fab:"",dark:"",color:"red"},on:{click:function(t){return e.deleteItem(i)}}},[a("v-icon",{attrs:{dark:"",small:""}},[e._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){return[e._v("NO DATA")]},proxy:!0}])})],1)],1)],1)},Ee=[],Ae={data(){return{test:!0,dialog:!1,search:"",headers:[{text:"ID",align:"left",sortable:!1,value:"id"},{text:"email",value:"email"},{text:"surname",value:"prefix"},{text:" IsVerified",value:"active"},{text:" Actions",value:"action"}],editedIndex:-1,editedItem:{name:"",surname:0,date:0,mail:0,boolean:!1},defaultItem:{name:"",surname:0,date:0,mail:0,boolean:!1},users:[],loading:!1}},async created(){this.loading=!0;let e=await d.a.get("/auth/user/all");e&&(this.users=e.data.data),this.loading=!1},computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog(e){e||this.close()}},methods:{editItem(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},async deleteItem(e){const t=this.users.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.users.splice(t,1);let a=await d.a.post("/auth/user/deactive",{id:e.id});console.log(a)},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},async save(){if(this.editedIndex>-1){Object.assign(this.users[this.editedIndex],this.editedItem);await d.a.put("/auth/user/update",this.editedItem)}else this.users.push(this.editedItem);this.close()}}},qe=Ae,Re=a("8fea"),Le=a("ce7e"),Ne=a("71d9"),Be=Object(_["a"])(qe,De,Ee,!1,null,"7a852892",null),Ue=Be.exports;y()(Be,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDataTable:Re["a"],VDialog:T["a"],VDivider:Le["a"],VIcon:M["a"],VRow:Y["a"],VSpacer:O["a"],VTextField:$["a"],VToolbar:Ne["a"],VToolbarTitle:j["a"]});var ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.families,search:e.search,loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Families")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"fas fa-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Founder Id"},model:{value:e.editedItem.founder_id,callback:function(t){e.$set(e.editedItem,"founder_id",t)},expression:"editedItem.founder_id"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1),e.alert?a("v-alert",{attrs:{type:e.alert.type}},[e._v(e._s(e.alert.content))]):e._e()]},proxy:!0},{key:"item.action",fn:function(t){var i=t.item;return[a("v-btn",{staticClass:"mx-2",attrs:{small:"",depressed:"",fab:"",dark:"",color:"green"},on:{click:function(t){return e.editItem(i)}}},[a("v-icon",{attrs:{dark:"",small:""}},[e._v("mdi-pencil")])],1)]}},{key:"no-data",fn:function(){return[e._v("NO DATA")]},proxy:!0}])})],1)],1)],1)},We=[],Ge={data(){return{test:!0,dialog:!1,alert:null,search:"",headers:[{text:"ID",align:"left",sortable:!1,value:"id"},{text:"name",value:"name"},{text:" founder",value:"founder_id"},{text:" Actions",value:"action"}],editedIndex:-1,editedItem:{name:"",surname:0,date:0,mail:0,boolean:!1},defaultItem:{name:"",surname:0,date:0,mail:0,boolean:!1},families:[],loading:!1}},async created(){let e=await d.a.get("/auth/family/all");e&&(this.loading=!0,this.families=e.data.data),this.loading=!1},computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog(e){e||this.close()}},methods:{editItem(e){this.editedIndex=this.families.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},async deleteItem(e){const t=this.families.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.families.splice(t,1);await d.a.post("/auth/family/deactive",{id:e.id})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},async save(){if(this.editedIndex>-1){Object.assign(this.families[this.editedIndex],this.editedItem);await d.a.put("auth/family/update",{id:this.editedItem.id,name:this.editedItem.name,founder_id:this.editedItem.founder_id}).catch(e=>{this.alert={state:!0,type:"error",content:"This founder ID is already used in other family!"}})}else this.families.push(this.editedItem);this.close()}}},Ye=Ge,He=Object(_["a"])(Ye,ze,We,!1,null,"19cb95a6",null),Ze=He.exports;y()(He,{VAlert:w["a"],VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDataTable:Re["a"],VDialog:T["a"],VDivider:Le["a"],VIcon:M["a"],VRow:Y["a"],VSpacer:O["a"],VTextField:$["a"],VToolbar:Ne["a"],VToolbarTitle:j["a"]});var Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.news,search:e.search,loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("News")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{placeholder:"Prefix",clearable:""},model:{value:e.prefix,callback:function(t){e.prefix=t},expression:"prefix"}})],1),a("v-btn",{attrs:{depressed:"",text:"",icon:""},on:{click:e.sendPrefix}},[a("v-icon",[e._v("mdi-send")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"fas fa-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Title"},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}}),a("v-text-field",{attrs:{label:"Description"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.active",fn:function(t){var i=t.item;return[a("v-icon",[e._v(e._s(i.active?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"))])]}},{key:"item.action",fn:function(t){var i=t.item;return[a("v-btn",{staticClass:"mx-2",attrs:{small:"",depressed:"",fab:"",dark:"",color:"red"},on:{click:function(t){return e.deleteItem(i)}}},[a("v-icon",{attrs:{dark:"",small:""}},[e._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){return[e._v("NO DATA")]},proxy:!0}])})],1)],1)],1)},Xe=[],Ke={data(){return{test:!0,dialog:!1,prefix:"",search:"",headers:[{text:"ID",align:"left",sortable:!1,value:"id"},{text:"tilte",value:"title"},{text:"description",value:"description"},{text:" Actions",value:"action"}],editedIndex:-1,editedItem:{name:"",surname:0,date:0,mail:0,boolean:!1},defaultItem:{name:"",surname:0,date:0,mail:0,boolean:!1},news:[],loading:!1}},async created(){},computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog(e){e||this.close()}},methods:{async sendPrefix(){let e=await d.a.post("auth/admin/news/all?prefix= "+this.prefix).catch(e=>{console.log(e),this.$toasted.error(e.data.message,{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3}),this.news=[]});e&&(this.news=e.data.data)},async editItem(e){this.editedIndex=this.news.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0;await d.a.post("/auth/admin/news/edit?id="+e.id+"&prefix="+this.prefix)},async deleteItem(e){const t=this.news.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.news.splice(t,1);await d.a.delete("/auth/admin/news/delete?id="+e.id+"&prefix="+this.prefix)},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},async save(){if(this.editedIndex>-1){Object.assign(this.news[this.editedIndex],this.editedItem);await d.a.put("/auth/news/update",this.editedItem)}else this.news.push(this.editedItem);this.close()}}},Qe=Ke,et=Object(_["a"])(Qe,Je,Xe,!1,null,"416ab8c7",null),tt=et.exports;y()(et,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDataTable:Re["a"],VDialog:T["a"],VDivider:Le["a"],VIcon:M["a"],VRow:Y["a"],VSpacer:O["a"],VTextField:$["a"],VToolbar:Ne["a"],VToolbarTitle:j["a"]});var at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("v-card",[a("v-card-title",[e._v("\n\t\t\t\tSystem Logs\n\t\t\t\t"),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"fas fa-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.logs,search:e.search,loading:e.loading,"loading-text":"Loading... Please wait"}})],1)],1)],1)},it=[],st={data(){return{search:"",headers:[{text:"ID",align:"left",sortable:!1,value:"id"},{text:"message",value:"message"},{text:"time",value:"updated_at"}],logs:[],loading:!1}},async created(){this.loading=!0;let e=await d.a.get("/auth/admin/logs/all");e&&(this.logs=e.data.data.reverse()),this.loading=!1}},rt=st,lt=Object(_["a"])(rt,at,it,!1,null,"2b53e32c",null),nt=lt.exports;y()(lt,{VCard:oe["a"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDataTable:Re["a"],VSpacer:O["a"],VTextField:$["a"]});var ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("v-card",[a("v-card-title",[e._v("\n\t\t\t\tAffinities\n\t\t\t\t"),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"fas fa-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,options:e.options,"server-items-length":e.totalSurnames,loading:e.loading},on:{"update:options":function(t){e.options=t}}})],1)],1)],1)},dt=[],ct={data(){return{search:"",headers:[{text:"ID",align:"left",sortable:!1,value:"number"},{text:"content",value:"content"}],users:[]}}},ut=ct,mt=Object(_["a"])(ut,ot,dt,!1,null,"49656663",null),ht=mt.exports;y()(mt,{VCard:oe["a"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDataTable:Re["a"],VSpacer:O["a"],VTextField:$["a"]});var ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("new-member-form",{attrs:{isFounder:e.isFounder,familly:e.familly},on:{memberCreated:e.refreshTree}}),e.isFounder?a("edit-member-form",{attrs:{isFounder:e.isFounder,familly:e.familly}}):e._e(),e.isFounder?a("delete-tree",{on:{treeDeleted:e.refreshTree}}):e._e()],1),a("div",{attrs:{id:"tree"}})])],1)},vt=[],pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""}},i),[e._v("ADD MEMBER")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Member Inforation")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"First Name*",required:"",rules:[e.rules.required]},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Middle Name"},model:{value:e.middle_name,callback:function(t){e.middle_name=t},expression:"middle_name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{color:"grey","background-color":"rgba(255, 255, 255, 0.9)",label:"Date of birth",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{ref:"picker",attrs:{max:null===e.death?(new Date).toISOString().substr(0,10):e.death,min:"1950-01-01"},on:{change:e.save},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{color:"grey","background-color":"rgba(255, 255, 255, 0.9)",label:"Date of death",readonly:""},model:{value:e.death,callback:function(t){e.death=t},expression:"death"}},i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:e.date},on:{change:e.savedeath},model:{value:e.death,callback:function(t){e.death=t},expression:"death"}})],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.email],hint:"If you want to invite this member to tree, you have to add a email","persistent-hint":"",label:"Email*"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e.isFounder?e._e():a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:"Mark as your child"},model:{value:e.isChild,callback:function(t){e.isChild=t},expression:"isChild"}})],1),e.isFounder?e._e():a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:"Mark as partner"},model:{value:e.isPartner,callback:function(t){e.isPartner=t},expression:"isPartner"}})],1),e.isFounder?a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.familly,disabled:e.disableParent,"item-text":"name",hint:"Parent of member, which you want to add","persistent-hint":"",clearable:"","item-value":"relation_id",label:"Parent*",required:""},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}})],1):e._e(),e.isFounder?a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.familly,disabled:e.disablePartner,clearable:"",hint:"Partner of member, which you want to add","persistent-hint":"","item-text":"name","item-value":"user_id",label:"Partner*",required:""},model:{value:e.partnerId,callback:function(t){e.partnerId=t},expression:"partnerId"}})],1):e._e(),e.isFounder?a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{disabled:e.disableChild,label:"Mark as head of familly"},model:{value:e.isHeadOfFamilly,callback:function(t){e.isHeadOfFamilly=t},expression:"isHeadOfFamilly"}})],1):e._e()],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.submit}},[e._v("Save")])],1)],1)],1)],1)},bt=[],gt={props:{familly:{type:Array,required:!0},isFounder:{type:Boolean,required:!0}},data:()=>({first_name:null,middle_name:null,last_name:null,email:null,date:null,death:null,dialog:!1,isChild:!0,isPartner:!1,disableParent:!1,disableChild:!1,disablePartner:!1,parentId:null,isHeadOfFamilly:!1,partnerId:null,menu:null,success:!1,menu2:null,valid:!1,rules:{required:e=>!!e||"Required.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."}}}),watch:{isChild(){this.isPartner=!this.isChild},isPartner(){this.isChild=!this.isPartner},parentId(e){void 0===e&&(this.parentId=null),this.disablePartner=null!==e},partnerId(e){void 0===e&&(this.partnerId=null),this.disableParent=null!==e}},computed:{...Object(c["b"])({member:"member"})},methods:{async submit(){let e,t=null,a=null;if(this.isFounder)null!==this.parentId?t=this.parentId:null!==this.partnerId&&(a=this.partnerId);else if(this.isChild){let e=this.familly.find(e=>{return e.user_id===this.member.user_id});t=e.relation_id}else this.isPartner&&(a=this.member.user_id);if(e=null!==this.death?await d.a.post("auth/member/add/deceased",{first_name:this.first_name,middle_name:this.middle_name,last_name:this.last_name,email:this.email,day_of_birth:this.date,day_of_death:this.death,parent_id:t,partner_id:a}).catch(e=>{if(422===e.status)for(var t in e.data.errors)this.$toasted.error(e.data.errors[t][0],{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3})}):await d.a.post("auth/member/add",{first_name:this.first_name,middle_name:this.middle_name,last_name:this.last_name,email:this.email,day_of_birth:this.date,day_of_death:this.death,parent_id:t,partner_id:a}).catch(e=>{if(422===e.status)for(var t in e.data.errors)this.$toasted.error(e.data.errors[t][0],{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3})}),!0===this.isHeadOfFamilly){await d.a.post("auth/relation/add",{partner_1_id:e.data.data.member.user_id,partner_2_id:null,parent_id:null});let t=await d.a.get("auth/relation/all"),a=t.data.data.find(e=>null===e.parent_id),i=t.data.data.find(t=>t.partner_1_id===e.data.data.member.user_id),s=await d.a.put("auth/relation/update",{id:a.id,partner_1_id:a.partner_1_id,partner_2_id:a.partner_2_id,parent_id:i.id});s&&(this.success=!0)}e&&(this.success=!0),!0===this.success?(this.$emit("memberCreated"),this.dialog=!1,this.$toasted.success("Member successfully added",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3})):this.$toasted.error("Error, try again!",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3})},save(e){this.$refs.menu.save(e)},savedeath(e){this.$refs.menu2.save(e)}}},_t=gt,xt=a("ac7c"),yt=a("2e4b"),wt=a("e449"),kt=a("b974"),Vt=Object(_["a"])(_t,pt,bt,!1,null,null,null),Ct=Vt.exports;y()(Vt,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCheckbox:xt["a"],VCol:I["a"],VContainer:P["a"],VDatePicker:yt["a"],VDialog:T["a"],VForm:S["a"],VMenu:wt["a"],VRow:Y["a"],VSelect:kt["a"],VSpacer:O["a"],VTextField:$["a"]});var It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{color:"orange",dark:""}},i),[e._v("EDIT MEMBER")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Member Inforation")])]),a("v-card-text",[a("v-container",[a("v-row",[e.isFounder?a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.familly,clearable:"",hint:"Member, which you want to edit","persistent-hint":"","item-text":"name","item-value":"id",label:"Member",required:""},model:{value:e.memberId,callback:function(t){e.memberId=t},expression:"memberId"}})],1):e._e(),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{disabled:!e.isPicked,label:"First Name",required:""},model:{value:e.editableMember.first_name,callback:function(t){e.$set(e.editableMember,"first_name",t)},expression:"editableMember.first_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{disabled:!e.isPicked,label:"Middle Name",required:""},model:{value:e.editableMember.middle_name,callback:function(t){e.$set(e.editableMember,"middle_name",t)},expression:"editableMember.middle_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{disabled:!e.isPicked,label:"Last Name",required:""},model:{value:e.editableMember.last_name,callback:function(t){e.$set(e.editableMember,"last_name",t)},expression:"editableMember.last_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu",attrs:{disabled:!e.isPicked,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{color:"grey",disabled:!e.isPicked,"background-color":"rgba(255, 255, 255, 0.9)",label:"Date of birth",readonly:""},model:{value:e.editableMember.day_of_birth,callback:function(t){e.$set(e.editableMember,"day_of_birth",t)},expression:"editableMember.day_of_birth"}},i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{ref:"picker",attrs:{disabled:!e.isPicked,max:null===e.editableMember.day_of_death?(new Date).toISOString().substr(0,10):e.editableMember.day_of_death,min:"1950-01-01"},on:{change:e.save},model:{value:e.editableMember.day_of_birth,callback:function(t){e.$set(e.editableMember,"day_of_birth",t)},expression:"editableMember.day_of_birth"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,disabled:!e.isPicked,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{color:"grey",disabled:!e.isPicked,"background-color":"rgba(255, 255, 255, 0.9)",label:"Date of death",readonly:""},model:{value:e.editableMember.day_of_death,callback:function(t){e.$set(e.editableMember,"day_of_death",t)},expression:"editableMember.day_of_death"}},i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{ref:"picker",attrs:{disabled:!e.isPicked,max:(new Date).toISOString().substr(0,10),min:e.editableMember.day_of_birth},on:{change:e.savedeath},model:{value:e.editableMember.day_of_death,callback:function(t){e.$set(e.editableMember,"day_of_death",t)},expression:"editableMember.day_of_death"}})],1)],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.submit}},[e._v("Save")])],1)],1)],1)],1)},Pt=[],Tt={props:{familly:{type:Array,required:!0},isFounder:{type:Boolean,required:!0}},data:()=>({dialog:!1,menu:null,menu2:null,memberId:null,email:null,editableMember:{id:null,first_name:null,middle_name:null,last_name:null,avatar:null,day_of_birth:null,day_of_death:null},isPicked:!1}),watch:{async memberId(e){if(void 0===e&&(this.memberId=null),null!==e){this.isPicked=!0,this.editableMember=this.familly.find(e=>e.id===this.memberId);let e=await d.a.get("auth/member/info/one/"+this.editableMember.user_id);this.editableMember=e.data.data[0]}else this.isPicked=!1}},computed:{...Object(c["b"])({member:"member"})},methods:{async submit(){await d.a.post("auth/member/add/deceased",{first_name:this.first_name,middle_name:this.middle_name,last_name:this.last_name,email:this.email,day_of_birth:this.day_of_birth,day_of_death:this.day_of_death})},save(e){this.$refs.menu.save(e)},savedeath(e){this.$refs.menu2.save(e)}}},St=Tt,Mt=Object(_["a"])(St,It,Pt,!1,null,null,null),Ot=Mt.exports;y()(Mt,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDatePicker:yt["a"],VDialog:T["a"],VMenu:wt["a"],VRow:Y["a"],VSelect:kt["a"],VSpacer:O["a"],VTextField:$["a"]});var $t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{color:"red",dark:""},on:{click:e.deleteTree}},i),[e._v("DELETE TREE")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}})],1)},jt=[],Ft={data(){return{dialog:!1}},methods:{async deleteTree(){if(confirm("Do you really want to delete?")){let e=await d.a.delete("auth/relation/delete/all").catch(e=>{this.$toasted.error("Something goes wrong",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3})});e&&this.$toasted.success("Tree successfully deleted",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:3e3}),this.dialog=!1,this.$emit("treeDeleted")}}}},Dt=Ft,Et=Object(_["a"])(Dt,$t,jt,!1,null,null,null),At=Et.exports;y()(Et,{VBtn:C["a"],VDialog:T["a"],VRow:Y["a"]});var qt={components:{NewMemberForm:Ct,EditMemberForm:Ot,DeleteTree:At},data(){return{familly:[],familyGroupTag:{group:!0,template:"group_grey",groupState:OrgChart.EXPAND},tags:{},isFounder:!1}},computed:{...Object(c["b"])({member:"member"})},watch:{async familly(e){null!==e&&e.forEach(e=>{return null!==e.img?e.img=`http://family.przedprojekt.com/storage/${e.img}`:e.img=""})}},async created(){let e=await d.a.get("auth/member/info");this.isFounder=e.data.founder},methods:{newGroup(){const e=Object.keys(this.tags).length+1;return this.tags[`marriage${e}`]=this.familyGroupTag,`marriage${e}`},groupRender(){this.familly.forEach(e=>{if(e.partnerId&&!e.tags){const t=this.newGroup();e.tags=[t];const a=this.familly.find(t=>t.id===e.partnerId);a.tags=[t]}})},async refreshTree(){await this.mountTree()},async mountTree(){let e=await d.a.get("/auth/tree");if(null!==e.data.data&&(this.familly=e.data.data),0!==this.familly.length){this.groupRender(),OrgChart.templates.diva.field_2='<text class="field_2" style="font-size: 12px;" fill="#ffffff" x="10" y="100" text-anchor="middle">{val}</text>',OrgChart.templates.diva.field_3='<text class="field_3" style="font-size: 14px;" fill="#ffffff" x="100" y="160" text-anchor="middle">{val}</text>';var t=new OrgChart(document.getElementById("tree"),{template:"diva",nodeMouseClick:OrgChart.action.details,nodeMenu:{details:{text:"Details"},remove:{text:"Remove"}},nodeBinding:{field_0:"name",field_1:"birthDay",field_2:"id",field_3:"deathDay",img_0:"img"},tags:this.tags,nodes:this.familly});t.editUI.on("field",(function(e,t){return!t.name.startsWith("marriage")&&("id"!=t.name&&("partnerId"!=t.name&&("user_id"!=t.name&&("relation_id"!=t.name&&void 0))))}))}else{await d.a.post("auth/relation/add",{partner_1_id:this.member.user_id,partner_2_id:"",parent_id:null});this.mountTree()}}},async mounted(){await this.mountTree()}},Rt=qt,Lt=Object(_["a"])(Rt,ft,vt,!1,null,"455b1d26",null),Nt=Lt.exports;y()(Lt,{VCol:I["a"],VContainer:P["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("div",{staticClass:"centring-posts"},[a("v-card-title",[e._v("Create your super duper new post!")]),a("create-post",{on:{newsCreated:e.refreshPost}}),a("v-divider",{staticStyle:{margin:"0",width:"90%"},attrs:{clas:"text--primary"}}),a("posts-list",{attrs:{userProfile:e.user,currentPosts:e.postsFilter,refreshPost:e.refresh},on:{refreshed:e.refreshPost}})],1)])],1)},Ut=[],zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",staticClass:"center",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"pt-5",attrs:{rules:e.titleRules,label:"Title",solo:"",required:"",name:"input-7-4",align:"left"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("v-textarea",{attrs:{rules:e.contentRules,label:"What happend? Type your post",solo:"",required:"",name:"input-7-4"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),a("v-btn",{attrs:{disable:!e.valid,rounded:""},on:{click:e.submit}},[e._v("send")])],1)},Wt=[],Gt={data:()=>({isVisible:!0,valid:!0,title:"",description:"",titleRules:[e=>!!e||"Title is required"],contentRules:[e=>!!e||"Post content is required"]}),methods:{async submit(){if(this.$refs.form.validate()){await d.a.post("auth/news/add",{title:this.title,description:this.description});this.$emit("newsCreated");this.$toasted.success("Your post was created!",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:1e3})}},changeVisiblity(){this.isVisible?this.isVisible=!1:this.isVisible=!0}},components:{}},Yt=Gt,Ht=(a("a3c5"),a("a844")),Zt=Object(_["a"])(Yt,zt,Wt,!1,null,"fcc60576",null),Jt=Zt.exports;y()(Zt,{VBtn:C["a"],VForm:S["a"],VTextField:$["a"],VTextarea:Ht["a"]});var Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row center"},[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("News Inforation")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Title*",required:""},model:{value:e.editableItem.title,callback:function(t){e.$set(e.editableItem,"title",t)},expression:"editableItem.title"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:" Description",required:""},model:{value:e.editableItem.description,callback:function(t){e.$set(e.editableItem,"description",t)},expression:"editableItem.description"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.submit(e.news)}}},[e._v("Save")])],1)],1)],1),e._l(e.news,(function(t){return a("div",{key:t.id,staticClass:"col-md"},[a("v-card",{attrs:{"min-width":"344"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("span",{staticClass:"headline"},[e._v(e._s(t.title))]),a("div",[e.member.user_id===t.author_id?a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(){e.editedIndex=e.news.indexOf(t),e.editableItem=Object.assign({},t),e.dialog=!0}}},[a("v-icon",{attrs:{color:"green"}},[e._v("mdi-pencil")])],1):e._e(),e.member.user_id===t.author_id?a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.deletePosts(t.id)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-delete")])],1):e._e()],1)]),a("v-list-item-subtitle",[a("p",[e._v("\n\t\t\t\t\t\t\tby\n\t\t\t\t\t\t\t"),a("b",[e._v(e._s(t.author_id))])]),a("v-divider",{staticStyle:{margin:"0"},attrs:{clas:"text--primary"}})],1),a("p",[e._v(e._s(t.description))])],1)],1),a("v-card-text",[e._v("\n\t\t\t\tCreated at\n\t\t\t\t"),a("b",[e._v(e._s(t.created_at))])])],1)],1)}))],2)},Kt=[],Qt={props:["userProfile","currentPosts","refreshPost"],data:()=>({news:[],dialog:!1,title:"",description:"",onlineUser:{},loading:!1,loader:null,editedIndex:-1,editableItem:{title:"",description:""},lastPost:0}),async created(){await this.getPosts()},computed:{...Object(c["b"])({member:"member"})},watch:{async refreshPost(e,t){!0===e&&(await this.getPosts(),this.$emit("refreshed"))}},methods:{async getPosts(){let e=await d.a.get("auth/news/all");e&&(this.news=e.data.data.reverse())},async deletePosts(e){if(confirm("Do you really want to delete?")){await d.a.delete("auth/news/delete?id="+e);this.getPosts()}},close(){this.dialog=!1,setTimeout(()=>{this.editableItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},async submit(e){if(this.editedIndex>-1){Object.assign(this.news[this.editedIndex],this.editableItem);await d.a.put("/auth/news/update",{id:this.editableItem.id,title:this.editableItem.title,description:this.editableItem.description})}else this.news.push(this.editableItem);this.close()}},components:{"create-post":Jt}},ea=Qt,ta=(a("7f58"),a("da13")),aa=a("5d23"),ia=Object(_["a"])(ea,Xt,Kt,!1,null,"101d94b2",null),sa=ia.exports;y()(ia,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDialog:T["a"],VDivider:Le["a"],VIcon:M["a"],VListItem:ta["a"],VListItemContent:aa["a"],VListItemSubtitle:aa["b"],VListItemTitle:aa["c"],VRow:Y["a"],VSpacer:O["a"],VTextField:$["a"]});var ra={data:()=>({user:{id:""},refresh:!1,postsFilter:"getsomeposts"}),async created(){},methods:{refreshPost(){this.refresh=!this.refresh}},components:{"create-post":Jt,"posts-list":sa}},la=ra,na=(a("a9b9"),Object(_["a"])(la,Bt,Ut,!1,null,"7b8663c0",null)),oa=na.exports;y()(na,{VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDivider:Le["a"]});var da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("div",{staticClass:"centring-posts"},[a("uploadFile",{on:{refreshGallery:e.refreshGallery}}),a("v-divider",{staticStyle:{margin:"0",width:"90%"},attrs:{clas:"text--primary"}}),a("picture-list",{attrs:{userProfile:e.user,currentPicture:e.pictureFilter,refreshPicture:e.refresh},on:{refreshed:e.refreshGallery}})],1)])],1)},ca=[],ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"large-12 medium-12 small-12 cell"},[a("v-form",{ref:"form",staticClass:"center",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Add new photo!")])]),a("v-text-field",{staticClass:"pt-5",attrs:{rules:e.contentRules,label:"description",solo:"",required:"",name:"input-7-4",align:"left"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),a("label",[e._v("\n\t\t\t\tFile\n\t\t\t\t"),a("input",{attrs:{type:"file"},on:{change:e.onFileChanged}})]),a("v-btn",{attrs:{disable:!e.valid,rounded:""},on:{click:e.onUpload}},[e._v("send")]),0!==e.uploadPercentage?a("v-progress-linear",{staticStyle:{padding:"10px"},attrs:{value:e.uploadPercentage}}):e._e()],1)],1)])},ma=[],ha={data:()=>({isVisible:!0,valid:!0,contentRules:[e=>!!e||"Post content is required"],selectedFile:null,description:"",uploadPercentage:0}),watch:{uploadPercentage(e,t){}},methods:{onFileChanged(e){this.selectedFile=e.target.files[0]},async onUpload(){const e=new FormData;e.set("description",this.description),e.append("photo_input",this.selectedFile,this.selectedFile.name),await d.a.post("auth/gallery/add",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.uploadPercentage=parseInt(Math.round(e.loaded/e.total*100))}.bind(this)}).then(e=>{setTimeout((function(){this.uploadPercentage=0}),1e3)}),console.log(this.uploadPercentage),this.$emit("refreshGallery")}}},fa=ha,va=(a("8fe2"),a("8e36")),pa=Object(_["a"])(fa,ua,ma,!1,null,"1f29a25c",null),ba=pa.exports;y()(pa,{VBtn:C["a"],VCardTitle:de["c"],VForm:S["a"],VProgressLinear:va["a"],VTextField:$["a"]});var ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row center"},e._l(e.gallery,(function(t){return a("div",{key:t.id,staticClass:"col-md"},[a("v-card",{attrs:{"min-width":"344"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("span",{staticClass:"headline"},[e._v(e._s(t.filename))]),a("div",[e.member.user_id===t.author_id?a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.deletePicture(t.id)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-delete")])],1):e._e()],1)]),a("v-list-item-subtitle",[a("p",[e._v("\n\t\t\t\t\t\t\tby\n\t\t\t\t\t\t\t"),a("b",[e._v(e._s(t.author_id))])]),a("img",{staticStyle:{"max-width":"300px"},attrs:{src:"http://family.przedprojekt.com/storage/"+t.filename}}),a("v-divider",{staticStyle:{margin:"0"},attrs:{clas:"text--primary"}})],1),a("p",[e._v(e._s(t.description))])],1)],1)],1)],1)})),0)},_a=[],xa={props:["refreshPicture"],data:()=>({gallery:[],loading:!1,loader:null}),computed:{...Object(c["b"])({member:"member"})},watch:{async refreshPicture(e,t){console.log(e),!0===e&&(await this.getPicture(),this.$emit("refreshed"))}},async created(){await this.getPicture()},methods:{async getPicture(){let e=await d.a.get("auth/gallery/all");e&&(this.gallery=e.data.data.reverse())},async deletePicture(e){if(confirm("Do you really want to delete?")){await d.a.delete("auth/gallery/delete?id="+e);this.getPicture()}}},components:{}},ya=xa,wa=(a("718f"),Object(_["a"])(ya,ga,_a,!1,null,"0b4c2920",null)),ka=wa.exports;y()(wa,{VBtn:C["a"],VCard:oe["a"],VDivider:Le["a"],VIcon:M["a"],VListItem:ta["a"],VListItemContent:aa["a"],VListItemSubtitle:aa["b"],VListItemTitle:aa["c"]});var Va={data:()=>({user:{id:""},refresh:!1,pictureFilter:"getsomepicture"}),created(){},methods:{refreshGallery(){this.refresh=!this.refresh}},components:{UploadFile:ba,"picture-list":ka}},Ca=Va,Ia=(a("9513"),Object(_["a"])(Ca,da,ca,!1,null,"0ec26b52",null)),Pa=Ia.exports;y()(Ia,{VCol:I["a"],VContainer:P["a"],VDivider:Le["a"]});var Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"box",attrs:{fluid:"","fill-height":""}},[a("v-col",{attrs:{sm:"12"}},[a("v-card",{staticStyle:{"background-color":"rgba(238, 238, 238, 0.75)"}},[a("v-card-text",{staticStyle:{"justify-content":"start","align-items":"center",display:"flex"}},[a("v-avatar",{attrs:{color:"green",size:"124"}},[a("img",{attrs:{src:"http://family.przedprojekt.com/storage/"+e.member.avatar}})]),a("v-col",[a("h1",{staticStyle:{padding:"20px"}},[e._v(e._s(e.member.first_name+" "+(null===e.member.middle_name?"":e.member.middle_name)+" "+e.member.last_name))]),a("label",{staticStyle:{padding:"20px"}},[e._v("\n\t\t\t\t\t\tNew avatar? Upload it!\n\t\t\t\t\t\t"),a("input",{attrs:{type:"file"},on:{change:e.onFileChanged}})]),a("v-btn",{staticClass:"ma-2 white--text",attrs:{loading:e.loading3,disabled:e.loading3,color:"blue-grey"},on:{click:e.onUpload}},[e._v("\n\t\t\t\t\t\tUpload\n\t\t\t\t\t\t"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-cloud-upload")])],1)],1)],1),a("v-divider",{staticStyle:{margin:"0",width:"100%"},attrs:{clas:"text--primary"}}),a("div",[a("v-card-text",[a("b",[e._v("Data urodzenia:")]),e._v("\n\t\t\t\t\t"+e._s(e.member.day_of_birth)+"\n\t\t\t\t")]),null!==e.member.day_of_death?a("v-card-text",[a("b",[e._v("Data śmierci:")]),e._v("\n\t\t\t\t\t"+e._s(e.member.day_of_death)+"\n\t\t\t\t")]):e._e(),a("v-card-text",[a("b",[e._v("Email")]),e._v("\n\t\t\t\t\t:"+e._s(e.user.email)+"\n\t\t\t\t")]),a("v-card-text",[a("b",[e._v("Nazwisko rodowe:")]),e._v("\n\t\t\t\t\t"+e._s(e.user.prefix)+"\n\t\t\t\t")]),a("v-card-text",[a("edit-profile",{attrs:{member:e.member}})],1)],1)],1)],1)],1)},Sa=[],Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{color:"red lighten-2",dark:""}},i),[e._v("Edit Data")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Profile")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.editableMember.first_name,callback:function(t){e.$set(e.editableMember,"first_name",t)},expression:"editableMember.first_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Middle Name"},model:{value:e.editableMember.middle_name,callback:function(t){e.$set(e.editableMember,"middle_name",t)},expression:"editableMember.middle_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.editableMember.last_name,callback:function(t){e.$set(e.editableMember,"last_name",t)},expression:"editableMember.last_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{color:"grey","background-color":"rgba(255, 255, 255, 0.9)",label:"Day of birth",required:"",readonly:""},model:{value:e.editableMember.day_of_birth,callback:function(t){e.$set(e.editableMember,"day_of_birth",t)},expression:"editableMember.day_of_birth"}},i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01"},on:{change:e.acceptDateOfBirth},model:{value:e.editableMember.day_of_birth,callback:function(t){e.$set(e.editableMember,"day_of_birth",t)},expression:"editableMember.day_of_birth"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{color:"grey","background-color":"rgba(255, 255, 255, 0.9)",label:"Date of death",readonly:""},model:{value:e.editableMember.day_of_death,callback:function(t){e.$set(e.editableMember,"day_of_death",t)},expression:"editableMember.day_of_death"}},i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:e.editableMember.day_of_birth},on:{change:e.acceptDateOfDeath},model:{value:e.editableMember.day_of_death,callback:function(t){e.$set(e.editableMember,"day_of_death",t)},expression:"editableMember.day_of_death"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)},Oa=[],$a={data(){return{menu:null,menu2:null,dialog:!1,test:null,editableMember:{id:null,first_name:null,middle_name:null,last_name:null,avatar:null,day_of_birth:null,day_of_death:null}}},props:{member:{type:Object,required:!0}},mounted(){this.editableMember=this.member},methods:{acceptDateOfBirth(e){this.$refs.menu.save(e)},acceptDateOfDeath(e){this.$refs.menu2.save(e)},close(){this.dialog=!1},async save(){await d.a.put("auth/member/update",{first_name:this.editableMember.first_name,middle_name:this.editableMember.middle_name,last_name:this.editableMember.last_name,day_of_birth:this.editableMember.day_of_birth,day_of_death:this.editableMember.day_of_death});this.close()}}},ja=$a,Fa=Object(_["a"])(ja,Ma,Oa,!1,null,null,null),Da=Fa.exports;y()(Fa,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDatePicker:yt["a"],VDialog:T["a"],VMenu:wt["a"],VRow:Y["a"],VSpacer:O["a"],VTextField:$["a"]});var Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({staticClass:"mx-5",attrs:{color:"blue lighten-2",dark:""}},i),[e._v("Reset Password")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Reset Password")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Email"},model:{value:e.resetPassword.email,callback:function(t){e.$set(e.resetPassword,"email",t)},expression:"resetPassword.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Password"},model:{value:e.resetPassword.password,callback:function(t){e.$set(e.resetPassword,"password",t)},expression:"resetPassword.password"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Repeat password"},model:{value:e.resetPassword.password_confirmation,callback:function(t){e.$set(e.resetPassword,"password_confirmation",t)},expression:"resetPassword.password_confirmation"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)},Aa=[],qa={data(){return{dialog:!1,resetPassword:{email:null,password:null,password_confimation:null}}},methods:{close(){this.dialog=!1},async save(){await d.a.put("password/reset",{email:this.resetPassword.email,password:this.resetPassword.password,password_confimation:this.resetPassword.password_confimation});this.close()}}},Ra=qa,La=Object(_["a"])(Ra,Ea,Aa,!1,null,null,null),Na=La.exports;y()(La,{VBtn:C["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VCol:I["a"],VContainer:P["a"],VDialog:T["a"],VRow:Y["a"],VSpacer:O["a"],VTextField:$["a"]});var Ba={name:"profile",data(){return{loader:null,loading:!1,loading2:!1,loading3:!1,loading4:!1,loading5:!1}},computed:{...Object(c["b"])({user:"user",member:"member"})},components:{EditProfile:Da,ResetPassword:Na},created(){null===this.member.first_name&null===this.member.last_name&&this.$toasted.info("You have to fill your profile fristly, before you will start playing with familly tree",{theme:"toasted-primary",position:"top-right",fullWidth:!0,fitToScreen:!1,duration:4e3})},watch:{loader(){const e=this.loader;this[e]=!this[e],setTimeout(()=>this[e]=!1,3e3),this.loader=null}},methods:{onFileChanged(e){this.selectedFile=e.target.files[0]},async onUpload(){this.loader="loading3";const e=new FormData;e.append("avatar",this.selectedFile,this.selectedFile.name);let t=await d.a.post("auth/member/update/avatar",e,{headers:{"Content-Type":"multipart/form-data"}});if(t){let e=await d.a.get("/auth/member/info");200===e.status&&p.dispatch("setMember",e.data.data[0])}}}},Ua=Ba,za=(a("a247"),a("8212")),Wa=Object(_["a"])(Ua,Ta,Sa,!1,null,"1ebf27aa",null),Ga=Wa.exports;y()(Wa,{VAvatar:za["a"],VBtn:C["a"],VCard:oe["a"],VCardText:de["b"],VCol:I["a"],VContainer:P["a"],VDivider:Le["a"],VIcon:M["a"]}),i["a"].use(te["a"]);const Ya=new te["a"]({base:"/family-hub/",routes:[{path:"/",name:"landing-page",component:pe},{path:"/admin/logs",name:"logs-panel",component:nt,meta:{requiresAdmin:!0}},{path:"/admin/users",name:"users-panel",component:Ue,meta:{requiresAdmin:!0}},{path:"/admin/families",name:"families-panel",component:Ze,meta:{requiresAdmin:!0}},{path:"/admin/news",name:"news-panel",component:tt,meta:{requiresAdmin:!0}},{path:"/admin/affinities",name:"affienities-panel",component:ht,meta:{requiresAdmin:!0}},{path:"/news",name:"news",component:oa,meta:{requiresAuth:!0}},{path:"/tree",name:"tree",component:Nt,meta:{requiresAuth:!0}},{path:"/gallery",name:"gallery",component:Pa,meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:Ga,meta:{requiresAuth:!0}},{path:"/verify/:token",name:"verifyFounder",component:Te},{path:"/verify/member/:token",name:"verifyUser",component:we},{path:"/reset/:token",name:"resetPassword",component:Fe}]});Ya.beforeEach(async(e,t,a)=>{let i,s=v.getTokenCookie();if(s){let e=await d.a.get("auth/user");if(e){p.dispatch("setSession",e.data);let t=await d.a.get("/auth/member/info");200===t.status&&p.dispatch("setMember",t.data.data[0]),i=e.data}else p.dispatch("deleteSession")}if(null===i&&(i=!1),e.matched.some(e=>e.meta.requiresAdmin)){if(!s&&!i||"admin"!==i.type)return void a({path:"/"})}else if(e.matched.some(e=>e.meta.requiresAuth)){if(!s)return void a({path:"/"});if(i&&"admin"===i.type)return void a({path:"/admin/logs"})}else{if(s)return"admin"===i.type?void a({path:"/admin/logs"}):void a({path:"/news"});p.dispatch("deleteSession")}a()});var Ha=Ya,Za=a("f309");i["a"].use(Za["a"]);var Ja=new Za["a"]({icons:{iconfont:"mdi"}}),Xa=a("a7fe"),Ka=a.n(Xa),Qa=a("a65d"),ei=a.n(Qa);i["a"].use(ei.a),i["a"].config.productionTip=!1,i["a"].use(Ka.a,d.a),i["a"].axios.defaults.baseURL="http://family.przedprojekt.com/api/",i["a"].axios.interceptors.request.use(e=>{let t=v.getTokenCookie();return t&&(e.headers["Authorization"]=`Bearer ${t}`),e.headers["Access-Control-Allow-Origin"]="*",e},e=>{return Promise.reject(e)}),i["a"].axios.interceptors.response.use(e=>{return e},async e=>{if(e.response)return Promise.reject(e.response);Ha.push({name:"login"}),e.response={data:{success:!1,message:"Connection error"}}}),new i["a"]({router:Ha,store:p,vuetify:Ja,render:e=>e(ee)}).$mount("#app")},"621e":function(e,t,a){"use strict";var i=a("3859"),s=a.n(i);s.a},"64fb":function(e,t,a){},"718f":function(e,t,a){"use strict";var i=a("d1ad"),s=a.n(i);s.a},"7f58":function(e,t,a){"use strict";var i=a("acfc"),s=a.n(i);s.a},"821b":function(e,t,a){"use strict";var i=a("18b4"),s=a.n(i);s.a},"8fe2":function(e,t,a){"use strict";var i=a("97a8"),s=a.n(i);s.a},9513:function(e,t,a){"use strict";var i=a("3124"),s=a.n(i);s.a},"97a8":function(e,t,a){},a247:function(e,t,a){"use strict";var i=a("43c1"),s=a.n(i);s.a},a3c5:function(e,t,a){"use strict";var i=a("f9f4"),s=a.n(i);s.a},a3f5:function(e,t,a){},a9b9:function(e,t,a){"use strict";var i=a("a3f5"),s=a.n(i);s.a},acfc:function(e,t,a){},bc50:function(e,t,a){},cccb:function(e,t,a){"use strict";var i=a("4e69"),s=a.n(i);s.a},d1ad:function(e,t,a){},e361:function(e,t,a){},f9f4:function(e,t,a){}});
//# sourceMappingURL=app.c274520d.js.map